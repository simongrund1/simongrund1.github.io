<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"{{with .Site.LanguageCode}} xml:lang="{{.}}" lang="{{.}}"{{end}}>
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  {{ .Hugo.Generator }}

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  {{ if .IsHome -}}
  <title>{{ .Site.Title }}</title>
  {{- else -}}
  <title>{{ .Title }} &middot; {{ .Site.Title }}</title>
  {{- end }}

  <!-- CSS -->
  <link rel="stylesheet" href="{{ .Site.BaseURL }}css/print.css" media="print">
  <link rel="stylesheet" href="{{ .Site.BaseURL }}css/poole.css">
  <link rel="stylesheet" href="{{ .Site.BaseURL }}css/hyde.css">

  <!-- Fonts -->
  <script defer src="{{ .Site.BaseURL }}js/fontawesome-all.js"></script>
  <link rel="stylesheet" href="{{ .Site.BaseURL }}css/academicons.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro|Source+Serif+Pro|Inconsolata">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/icon.png">
  <link rel="shortcut icon" href="/icon-small.png">

  <!-- RSS -->
  <link href="{{ .RSSLink }}" rel="alternate" type="application/rss+xml" title="{{ .Site.Title }}" />

  <!-- Highlight.js -->
  <link rel="stylesheet" href="{{ .Site.BaseURL }}css/code.css">
  <!--
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/languages/r.min.js"></script>
  -->
  <script src="{{ .Site.BaseURL }}js/highlight.pack.js"></script>
  <script src="{{ .Site.BaseURL }}js/highlight.better-r.min.js"></script>

  <script>
    hljs.initHighlightingOnLoad()
  </script>

  <!-- MathJax -->
  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  
    MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      displayMath: [['$$','$$'], ['\\[','\\]']],
      processEscapes: true,
      processEnvironments: true,
      preferredFont: "TeX",
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
      TeX: { equationNumbers: { autoNumber: "AMS" },
           extensions: ["AMSmath.js", "AMSsymbols.js"] }
    }
    });
    MathJax.Hub.Config({
      "HTML-CSS": {scale: 85}
    });  
  
    MathJax.Hub.Queue(function() {
    // auto-execute fix for math wrapped in code blocks, see:
    // https://bookdown.org/yihui/blogdown/javascript.html
    var i, text, code, codes = document.getElementsByTagName('code');
      for (i = 0; i < codes.length;) {
        code = codes[i];
        if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
          text = code.textContent;
          if (/^\$[^$]/.test(text) && /[^$]\$$/.test(text)) {
            text = text.replace(/^\$/, '\\(').replace(/\$$/, '\\)');
            code.textContent = text;
          }
          if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
              /^\$(.|\s)+\$$/.test(text) ||
              /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
            code.outerHTML = code.innerHTML;  // remove <code></code>
            continue;
          }
        }
        i++;
      }
    })(); 

    MathJax.Hub.Config({
    // Autonumbering by mathjax
    TeX: { equationNumbers: { autoNumber: "AMS" } }
    });

    MathJax.Hub.Config({
    // fix color applied to math (from code)
      "HTML-CSS": {
        styles: {
          ".MathJax .mo, .MathJax .mi": {color: "black ! important"}
        }
      }
    });
  </script>

  <!-- Navigation menu toggle -->
  <script>
    function toggleNavbar() {
      var navMenu = document.getElementById("sidebar-main");
      var switchIcon = document.getElementById("sidebar-switch-icon");
      if ( navMenu.classList.contains("hidden") ) {
         navMenu.classList.remove("hidden");
         navMenu.style.maxHeight = "25rem";
         switchIcon.classList.remove("fa-chevron-down");
         switchIcon.classList.add("fa-chevron-up");
      } else {
         navMenu.classList.add("hidden");
         navMenu.style.maxHeight = "0";
         switchIcon.classList.remove("fa-chevron-up");
         switchIcon.classList.add("fa-chevron-down");
      }
    }
  </script>
</head>
